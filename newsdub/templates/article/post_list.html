{% extends 'base_dashboard.html' %}
{% load switchcase %}
{% load custom_filters %}
{% block title %}Your Articles{% endblock %}
{% block js_top %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="{{ STATIC_URL }}js/jquery.tinysort.min.js"></script>
{% endblock %}

{% block content %}
<script>
    var aAsc = [];
    function sortTable(nr) {
        aAsc[nr] = aAsc[nr]=='asc'?'desc':'asc';
        $('#xtable>tbody>tr').tsort('td:eq('+nr+')[abbr]',{order:aAsc[nr]});
    }
</script>


        <table id="xtable" cellpadding="5" cellspacing="0" border="0" class="blog-list" width="700px">
            <thead>
            <th><a href="javascript:sortTable(0)">Title</a></th>
            <th><a href="javascript:sortTable(1)">Published On</a></th>
            <th><a href="javascript:sortTable(2)">Status</a></th>
            <th></th>
            </thead>
            {% for post in object_list %}
{#              <tr class="{% cycle odd,even %}">#}
                <tr>
                    <td abbr="{{ post.title }}"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a><br />
                        {% with post.tease|truncatewords:"50" as body %}
                                {{ body|force_escape|linebreaks|safe }}
                        {% endwith %}
                    </td>
                    <td nowrap abbr="{{ post.publish|date:"U" }}">{{ post.publish|date }}</td>
                    <td abbr="{{ post.status }}">
                        {% with post.status as status %}
                            {% switch status %}
                                {% case 2 %}Published{% endcase %}
                                {% case 1 %}Draft{% endcase %}
                            {% endswitch %}
                        {% endwith %}
                    </td>
                    <td width="50px" align="center">
                        <a href="{% url post_update post.slug %}">
                            <img src="{{ STATIC_URL }}images/pencil.png" alt="edit" border="0" title="Edit Post"  />
                        </a>
                    </td>
                    <td align="right">

                        <form action="{% url post_delete post.slug %}" method="POST">{% csrf_token %}
                            <input type="image" src="{{ STATIC_URL }}images/delete.png" alt="delete" border="0" title="Delete Post" />
                            <input type="hidden" name="path" value="{{ request.path }}"/>
                            <input type="hidden" name="action" value="delete"/>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </table>

{% endblock %}